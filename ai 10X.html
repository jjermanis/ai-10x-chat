<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>10X</title>

<style>
  body {
    margin: 0;
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    color: #fff;
  }

  #game {
    width: 800px;
    height: 500px;
    background: #000;
    border: 2px solid #fff;
    position: relative;
    box-sizing: border-box;
  }

  #title {
    position: absolute;
    top: 10px;
    width: 100%;
    text-align: center;
    font-size: 64px;
    font-weight: bold;
  }

  #low, #high {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 32px;
  }

  #low { left: 20px; }
  #high { right: 20px; }

  #center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
  }

  #guessInput {
    font-size: 24px;
    width: 200px;
    text-align: center;
  }

  button {
    font-size: 18px;
    padding: 6px 16px;
    margin-top: 10px;
    cursor: pointer;
  }

  #status {
    position: absolute;
    bottom: 20px;
    width: 100%;
    text-align: center;
    font-size: 20px;
  }

  #debug {
    position: absolute;
    bottom: 20px;
    left: 20px;
    font-size: 14px;
    color: #aaa;
  }

  #newGameBtn {
    position: absolute;
    bottom: 20px;
    right: 20px;
    display: none;
  }
</style>
</head>

<body>
<div id="game">

  <div id="title">10</div>

  <div id="low">1</div>
  <div id="high">10</div>

  <div id="center">
    <input id="guessInput" type="number">
    <br>
    <button id="guessBtn">Guess</button>
    <button id="nextBtn" style="display:none;">Next</button>
  </div>

  <div id="status"></div>
  <div id="debug"></div>

  <button id="newGameBtn">New Game</button>
</div>

<script>
let exponent;
let maxNumber;
let target;
let low;
let high;
let guessesRemaining;
let roundOver;

function guessesNeeded(max) {
  let k = 1;
  while (Math.pow(2, k) <= max) k++;
  return k;
}

function startRound() {
  maxNumber = Math.pow(10, exponent);
  target = Math.floor(Math.random() * maxNumber) + 1;

  low = 1;
  high = maxNumber;
  guessesRemaining = guessesNeeded(maxNumber);
  roundOver = false;

  document.getElementById("low").textContent = low;
  document.getElementById("high").textContent = high;
  document.getElementById("status").textContent =
    `You have ${guessesRemaining} guesses remaining`;
  document.getElementById("debug").textContent =
    `DEBUG: number = ${target}`;

  document.getElementById("guessInput").value = "";
  document.getElementById("guessBtn").style.display = "inline-block";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("newGameBtn").style.display = "none";
}

function newGame() {
  exponent = 1;
  startRound();
}

function handleGuess() {
  if (roundOver) return;

  const guess = Number(document.getElementById("guessInput").value);
  if (!guess || guess < low || guess > high) return;

  if (guess === target) {
    roundOver = true;
    document.getElementById("status").textContent = "You Found It!";
    document.getElementById("guessBtn").style.display = "none";
    document.getElementById("nextBtn").style.display = "inline-block";
    return;
  }

  guessesRemaining--;

  if (guess < target) {
    // Corrected logic
    low = guess + 1;
  } else {
    high = guess - 1;
  }

  document.getElementById("low").textContent = low;
  document.getElementById("high").textContent = high;
  document.getElementById("status").textContent =
    `You have ${guessesRemaining} guesses remaining`;

  if (guessesRemaining === 0) {
    roundOver = true;
    document.getElementById("status").textContent =
      `Game Over - the number was ${target}`;
    document.getElementById("guessBtn").style.display = "none";
    document.getElementById("newGameBtn").style.display = "inline-block";
  }
}

document.getElementById("guessBtn").onclick = handleGuess;
document.getElementById("nextBtn").onclick = () => {
  exponent++;
  startRound();
};
document.getElementById("newGameBtn").onclick = newGame;

document.getElementById("guessInput").addEventListener("keydown", e => {
  if (e.key === "Enter") handleGuess();
});

newGame();
</script>

</body>
</html>
